import{c as d,a as t,o as a,d as f,u as v,m,n as k,b as s,f as o,F as w,t as i,i as _,w as b,r as $,g as C}from"./index-DT03jyhA.js";import{u as V,r as q}from"./tracks-C4xg7Mxt.js";import{u as M,r as j}from"./requests-D9rGaYVy.js";import{_ as R,c as S,d as B}from"./Footer.vue_vue_type_script_setup_true_lang-Bm2BFVvq.js";import{r as A}from"./CurrencyDollarIcon-CsVrdL4t.js";import{r as Q}from"./ArrowPathIcon-C-Ojjxoq.js";import{r as N}from"./SunIcon-DNKNajIN.js";function U(x,e){return a(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})])}function E(x,e){return a(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0 0 12 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75Z"})])}function H(x,e){return a(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"})])}function P(x,e){return a(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})])}const T={class:"min-h-screen bg-light-bg dark:bg-gray-900 flex flex-col"},Z={class:"flex-1 container mx-auto px-4 py-8 md:py-12"},D={class:"max-w-7xl mx-auto"},F={key:0,class:"text-center p-8 bg-light-bg-secondary dark:bg-gray-800/50 rounded-2xl border border-light-border dark:border-gray-700/30"},L={key:0,class:"space-y-6 md:space-y-8"},G={class:"bg-light-bg-secondary dark:bg-gray-800/40 backdrop-blur-lg p-6 md:p-8 rounded-2xl border border-light-border dark:border-gray-700/30 shadow-2xl shadow-black/30"},z={class:"flex flex-col lg:flex-row gap-6 md:gap-8 items-start"},I={class:"flex-1 space-y-4 md:space-y-6 w-full"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},K={class:"p-4 bg-light-bg-tertiary dark:bg-gray-900/20 rounded-xl border border-light-border dark:border-gray-700/30 hover:border-purple-400/30 transition-all group"},O={class:"flex items-center"},W={class:"text-lg md:text-xl font-medium text-light-text dark:text-gray-100"},X={class:"p-4 bg-light-bg-tertiary dark:bg-gray-900/20 rounded-xl border border-light-border dark:border-gray-700/30 hover:border-blue-400/30 transition-all group"},Y={class:"flex items-center"},tt={class:"text-lg md:text-xl font-medium text-light-text dark:text-gray-100"},rt={class:"p-4 bg-light-bg-tertiary dark:bg-gray-900/20 rounded-xl border border-light-border dark:border-gray-700/30 hover:border-green-400/30 transition-all group"},et={class:"flex items-center"},ot={class:"text-lg md:text-xl font-medium text-light-text dark:text-gray-100"},st={class:"p-4 bg-light-bg-tertiary dark:bg-gray-900/20 rounded-xl border border-light-border dark:border-gray-700/30 hover:border-amber-400/30 transition-all group"},dt={class:"flex items-center"},at={class:"text-2xl md:text-3xl font-bold text-green-400"},lt={class:"md:col-span-2 col-span-1"},nt={class:"flex items-center justify-center space-x-3 relative"},it={class:"lg:w-[400px] w-full space-y-6 lg:border-l lg:border-light-border dark:lg:border-gray-700/30 lg:pl-8"},gt={class:"text-center"},xt={class:"p-4 bg-light-bg-tertiary dark:bg-gray-900/30 rounded-2xl border-2 border-purple-400/20 hover:border-purple-400/40 transition-all inline-block shadow-lg shadow-purple-500/10"},bt=["src"],pt={class:"grid md:grid-cols-2 gap-4 md:gap-6"},ct={class:"bg-light-bg-secondary dark:bg-gray-800/40 backdrop-blur-lg p-6 rounded-2xl border border-light-border dark:border-gray-700/30 shadow-xl"},mt={class:"space-y-4"},ut={class:"flex justify-between items-center p-3 bg-light-bg-tertiary dark:bg-gray-900/20 rounded-xl border border-purple-400/20 hover:border-purple-400/40 transition-all"},ht={class:"text-xl md:text-2xl font-bold text-purple-400"},yt={class:"flex justify-between items-center p-3 bg-light-bg-tertiary dark:bg-gray-900/20 rounded-xl border border-blue-400/20 hover:border-blue-400/40 transition-all"},ft={class:"text-xl md:text-2xl font-bold text-blue-400"},vt={class:"bg-light-bg-secondary dark:bg-gray-800/40 backdrop-blur-lg p-6 rounded-2xl border border-light-border dark:border-gray-700/30 shadow-xl"},kt={class:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4"},wt={key:1,class:"text-center p-8 bg-light-bg-secondary dark:bg-gray-800/50 rounded-2xl border border-red-400/30 shadow-xl"},_t={class:"max-w-md mx-auto space-y-4"},St=f({__name:"DashboardView",setup(x){const e=v(),p=V(),c=M(),u=m(()=>p.tracks),h=m(()=>c.requests.filter(g=>g.status==="pending")),y=()=>{var g;if(!((g=e.state.profile)!=null&&g.qr_code)){console.error("QR code URL is not available");return}try{const n=e.state.profile.qr_code.replace(/^https?:\/\/(?:[^\/]+)\/(media\/qr_codes\/.*)$/,"https://176.124.213.151/$1"),l=document.createElement("a");l.href=n,l.download=`qr-code-${e.state.profile.name||"venue"}.png`,document.body.appendChild(l),l.click(),document.body.removeChild(l)}catch(r){console.error("Error downloading QR code:",r)}};return k(async()=>{await e.init(),e.state.profile&&(await p.fetchTracks(e.state.profile.id),await c.fetchRequests())}),(g,r)=>{const n=$("router-link");return a(),d("div",T,[s(R),t("main",Z,[t("div",D,[r[21]||(r[21]=t("h1",{class:"text-3xl md:text-4xl lg:text-5xl font-bold mb-6 md:mb-10 bg-gradient-to-r from-purple-400 via-blue-400 to-cyan-400 bg-clip-text text-transparent animate-fade-in"}," Управление заведением ",-1)),o(e).loading?(a(),d("div",F,r[1]||(r[1]=[t("div",{class:"animate-pulse flex flex-col items-center space-y-4"},[t("div",{class:"h-4 bg-light-bg-tertiary dark:bg-gray-700/50 rounded w-1/4"}),t("div",{class:"h-4 bg-light-bg-tertiary dark:bg-gray-700/50 rounded w-1/2"})],-1)]))):(a(),d(w,{key:1},[o(e).state.profile?(a(),d("div",L,[t("div",G,[t("div",z,[t("div",I,[r[8]||(r[8]=t("h2",{class:"text-xl md:text-2xl font-bold text-light-text dark:text-gray-200 mb-4 bg-gradient-to-r from-purple-400/30 to-blue-400/30 w-max px-4 py-1 rounded-full"}," Профиль заведения ",-1)),t("div",J,[t("div",K,[t("div",O,[s(o(E),{class:"w-7 h-7 text-purple-400 mr-4 group-hover:rotate-12 transition-transform"}),t("div",null,[r[2]||(r[2]=t("p",{class:"text-xs md:text-sm text-light-text-secondary dark:text-gray-400"},"Название",-1)),t("p",W,i(o(e).state.profile.name),1)])])]),t("div",X,[t("div",Y,[s(o(P),{class:"w-7 h-7 text-blue-400 mr-4 group-hover:rotate-12 transition-transform"}),t("div",null,[r[3]||(r[3]=t("p",{class:"text-xs md:text-sm text-light-text-secondary dark:text-gray-400"},"Город",-1)),t("p",tt,i(o(e).state.profile.city),1)])])]),t("div",rt,[t("div",et,[s(o(H),{class:"w-7 h-7 text-green-400 mr-4 group-hover:rotate-12 transition-transform"}),t("div",null,[r[4]||(r[4]=t("p",{class:"text-xs md:text-sm text-light-text-secondary dark:text-gray-400"},"Телефон",-1)),t("p",ot,i(o(e).state.profile.phone),1)])])]),t("div",st,[t("div",dt,[s(o(A),{class:"w-7 h-7 text-amber-400 mr-4 group-hover:rotate-12 transition-transform"}),t("div",null,[r[5]||(r[5]=t("p",{class:"text-xs md:text-sm text-light-text-secondary dark:text-gray-400"},"Баланс",-1)),t("p",at,i(o(e).state.profile.balance)+" ₽",1)])])]),t("div",lt,[t("div",{class:"p-4 rounded-xl transition-all group cursor-pointer bg-gradient-to-r from-purple-400/80 to-blue-400/80 hover:from-purple-400 hover:to-blue-400 shadow-lg shadow-purple-500/20 hover:shadow-purple-500/40 relative overflow-hidden border-2 border-purple-400/30 hover:border-purple-400/50",onClick:y},[r[7]||(r[7]=t("div",{class:"absolute inset-0 opacity-0 group-hover:opacity-30 transition-opacity bg-gradient-to-r from-white/30 via-transparent to-transparent"},null,-1)),t("div",nt,[s(o(U),{class:"w-7 h-7 text-gray-100"}),r[6]||(r[6]=t("div",{class:"text-center"},[t("p",{class:"text-lg md:text-xl font-semibold text-gray-100 drop-shadow-sm"}," Скачать QR-код "),t("p",{class:"text-xs md:text-sm text-gray-200/90 mt-1"}," PNG 370x370px ")],-1))])])])])]),t("div",it,[t("div",gt,[r[9]||(r[9]=t("h3",{class:"text-lg md:text-xl font-semibold text-light-text dark:text-gray-200 mb-4"},"QR-код для заказа",-1)),t("div",xt,[o(e).state.profile.qr_code?(a(),d("img",{key:0,src:o(e).state.profile.qr_code,alt:"QR-код",class:"w-48 h-48 md:w-64 md:h-64 object-contain mx-auto"},null,8,bt)):_("",!0)]),r[10]||(r[10]=t("p",{class:"text-xs md:text-sm text-light-text-secondary dark:text-gray-400 mt-3 md:mt-4"},"Отсканируйте код для перехода к заказу",-1))])])])]),t("div",pt,[t("div",ct,[r[13]||(r[13]=t("h2",{class:"text-lg md:text-xl font-semibold text-light-text dark:text-gray-200 mb-4"},"Статистика",-1)),t("div",mt,[t("div",ut,[r[11]||(r[11]=t("span",{class:"text-light-text-secondary dark:text-gray-400"},"Всего треков",-1)),t("span",ht,i(u.value.length),1)]),t("div",yt,[r[12]||(r[12]=t("span",{class:"text-light-text-secondary dark:text-gray-400"},"Активные запросы",-1)),t("span",ft,i(h.value.length),1)])])]),t("div",vt,[r[18]||(r[18]=t("h2",{class:"text-lg md:text-xl font-semibold text-light-text dark:text-gray-200 mb-4"},"Действия",-1)),t("div",kt,[s(n,{to:"/tracks/add",class:"p-4 bg-light-bg-tertiary dark:bg-gray-900/20 hover:bg-gradient-to-br from-purple-400/10 to-blue-400/10 rounded-xl border border-light-border dark:border-gray-700/30 hover:border-purple-400/30 transition-all flex items-center group"},{default:b(()=>[s(o(q),{class:"w-6 h-6 md:w-7 md:h-7 text-purple-400 mr-3 group-hover:rotate-90 transition-transform"}),r[14]||(r[14]=t("span",{class:"text-light-text dark:text-gray-300 group-hover:text-purple-400 text-sm md:text-base"},"Добавить трек",-1))]),_:1}),s(n,{to:"/tracks",class:"p-4 bg-light-bg-tertiary dark:bg-gray-900/20 hover:bg-gradient-to-br from-blue-400/10 to-cyan-400/10 rounded-xl border border-light-border dark:border-gray-700/30 hover:border-blue-400/30 transition-all flex items-center group"},{default:b(()=>[s(o(N),{class:"w-6 h-6 md:w-7 md:h-7 text-blue-400 mr-3 group-hover:rotate-12 transition-transform"}),r[15]||(r[15]=t("span",{class:"text-light-text dark:text-gray-300 group-hover:text-blue-400 text-sm md:text-base"},"Управление треками",-1))]),_:1}),s(n,{to:"/requests",class:"p-4 bg-light-bg-tertiary dark:bg-gray-900/20 hover:bg-gradient-to-br from-green-400/10 to-emerald-400/10 rounded-xl border border-light-border dark:border-gray-700/30 hover:border-green-400/30 transition-all flex items-center group"},{default:b(()=>[s(o(j),{class:"w-6 h-6 md:w-7 md:h-7 text-green-400 mr-3 group-hover:-rotate-12 transition-transform"}),r[16]||(r[16]=t("span",{class:"text-light-text dark:text-gray-300 group-hover:text-green-400 text-sm md:text-base"},"Запросы треков",-1))]),_:1}),s(n,{to:"/withdrawals",class:"p-4 bg-light-bg-tertiary dark:bg-gray-900/20 hover:bg-gradient-to-br from-amber-400/10 to-orange-400/10 rounded-xl border border-light-border dark:border-gray-700/30 hover:border-amber-400/30 transition-all flex items-center group"},{default:b(()=>[s(o(B),{class:"w-6 h-6 md:w-7 md:h-7 text-amber-400 mr-3 group-hover:rotate-12 transition-transform"}),r[17]||(r[17]=t("span",{class:"text-light-text dark:text-gray-300 group-hover:text-amber-400 text-sm md:text-base"},"Вывод средств",-1))]),_:1})])])])])):(a(),d("div",wt,[t("div",_t,[r[20]||(r[20]=t("p",{class:"text-light-text dark:text-gray-300 mb-3"},"Ошибка загрузки профиля",-1)),t("button",{onClick:r[0]||(r[0]=(...l)=>o(e).fetchProfile&&o(e).fetchProfile(...l)),class:"px-6 py-2.5 bg-red-400/10 hover:bg-red-400/20 text-red-400 rounded-xl transition-all border border-red-400/30 hover:border-red-400/50 flex items-center justify-center mx-auto gap-2"},[s(o(Q),{class:"w-5 h-5 animate-spin-once"}),r[19]||(r[19]=C(" Попробовать снова "))])])]))],64))])]),s(S)])}}});export{St as default};
