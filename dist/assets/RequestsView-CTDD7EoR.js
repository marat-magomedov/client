import{u as k,r as w}from"./requests-DILF2II8.js";import{_ as j,c as C}from"./Footer.vue_vue_type_script_setup_true_lang-XIL_Cgpd.js";import{c as o,a as t,o as a,d as $,h as R,m as S,n as M,b as i,q as c,g as b,f as n,t as l,F as B,p as V,i as u}from"./index-NQPRTgxF.js";import{r as A}from"./ArrowPathIcon-DAYz0Lqm.js";import{r as D}from"./SunIcon-DNQxB045.js";import{r as N}from"./CheckIcon-CV6kqAPZ.js";import"./CurrencyDollarIcon-BMfZS4kr.js";function T(x,d){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})])}function F(x,d){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const L={class:"min-h-screen bg-light-bg dark:bg-gray-900 flex flex-col"},z={class:"flex-1 container mx-auto px-4 py-8"},E={class:"max-w-5xl mx-auto"},U={class:"flex mb-6 bg-light-bg-secondary dark:bg-gray-800/40 backdrop-blur-lg rounded-xl border border-light-border dark:border-gray-700/30 overflow-hidden shadow-xl"},Z={class:"bg-light-bg-secondary dark:bg-gray-800/40 backdrop-blur-lg rounded-2xl border border-light-border dark:border-gray-700/30 shadow-xl"},G={key:0,class:"p-8 text-center"},H={class:"inline-flex items-center gap-3 text-light-text-secondary dark:text-gray-400"},I={key:1,class:"p-4 bg-red-400/10 rounded-xl border border-red-400/30 text-red-400 mx-4 my-6"},J={key:2,class:"p-8 text-center text-light-text-secondary dark:text-gray-400"},K={key:0},O={key:1},P={key:3,class:"p-4 space-y-4"},Q={class:"flex flex-col md:flex-row gap-4 md:gap-6"},W={class:"flex-shrink-0 relative w-full sm:w-32 h-32"},X={class:"w-full h-full rounded-xl overflow-hidden border border-light-border dark:border-gray-700/30 transform group-hover:scale-[1.02] transition-transform"},Y=["src","alt"],q={class:"flex-1 min-w-0"},tt={class:"flex flex-col md:flex-row md:items-center justify-between gap-2 mb-3"},et={class:"text-lg md:text-xl font-semibold text-light-text dark:text-gray-100 truncate"},rt={class:"text-xs md:text-sm text-purple-400 whitespace-nowrap"},st={class:"text-light-text-secondary dark:text-gray-400 text-sm md:text-base mb-3"},ot={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},at={class:"space-y-3"},dt={class:"flex flex-wrap gap-3"},nt={class:"flex items-center gap-2"},it={class:"flex items-center gap-2"},lt={class:"grid grid-cols-2 gap-3"},gt={class:"p-3 bg-light-bg dark:bg-gray-800/50 rounded-lg"},ct={class:"text-base font-bold text-green-400"},xt={class:"p-3 bg-light-bg dark:bg-gray-800/50 rounded-lg"},pt={class:"text-base font-bold text-blue-400"},bt={class:"flex items-end justify-end md:justify-end"},ut={class:"flex flex-wrap gap-2"},mt=["onClick","disabled"],ht=["onClick","disabled"],Ct=$({__name:"RequestsView",setup(x){const d=k(),g=R("incoming"),p=S(()=>g.value==="incoming"?d.requests.filter(s=>s.status==="pending"):d.requests.filter(s=>s.status!=="pending"));function m(s){return new Date(s).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}function h(s){return{pending:"Ожидает",accepted:"Принят",rejected:"Отклонен"}[s]||s}function f(s){return{pending:"bg-amber-400/10 text-amber-400 border-amber-400/20",accepted:"bg-green-400/10 text-green-400 border-green-400/20",rejected:"bg-red-400/10 text-red-400 border-red-400/20"}[s]||"bg-gray-400/10 text-gray-400 border-gray-400/20"}async function y(s){await d.updateRequestStatus(s,"accepted")}async function _(s){await d.updateRequestStatus(s,"rejected")}return M(()=>{d.fetchRequests()}),(s,e)=>(a(),o("div",L,[i(j),t("main",z,[t("div",E,[e[12]||(e[12]=t("h1",{class:"text-3xl md:text-4xl font-bold mb-6 md:mb-8 bg-gradient-to-r from-purple-400 via-blue-400 to-cyan-400 bg-clip-text text-transparent animate-fade-in"}," Управление запросами ",-1)),t("div",U,[t("button",{onClick:e[0]||(e[0]=r=>g.value="incoming"),class:c(["px-6 py-4 text-sm font-medium flex-1 transition-all flex items-center justify-center gap-2",g.value==="incoming"?"bg-gradient-to-r from-purple-500/20 to-blue-500/20 text-light-text dark:text-white border-r border-light-border dark:border-gray-700/30":"text-light-text-secondary dark:text-gray-400 hover:text-light-text dark:hover:text-gray-300 hover:bg-light-bg dark:hover:bg-gray-800/50"])},[i(n(w),{class:"w-5 h-5"}),e[2]||(e[2]=b(" Входящие "))],2),t("button",{onClick:e[1]||(e[1]=r=>g.value="processed"),class:c(["px-6 py-4 text-sm font-medium flex-1 transition-all flex items-center justify-center gap-2",g.value==="processed"?"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 text-light-text dark:text-white border-l border-light-border dark:border-gray-700/30":"text-light-text-secondary dark:text-gray-400 hover:text-light-text dark:hover:text-gray-300 hover:bg-light-bg dark:hover:bg-gray-800/50"])},[i(n(T),{class:"w-5 h-5"}),e[3]||(e[3]=b(" Обработанные "))],2)]),t("div",Z,[n(d).loading?(a(),o("div",G,[t("div",H,[i(n(A),{class:"w-6 h-6 animate-spin-once"}),e[4]||(e[4]=t("span",null,"Загрузка запросов...",-1))])])):n(d).error?(a(),o("div",I,l(n(d).error),1)):p.value.length===0?(a(),o("div",J,[g.value==="incoming"?(a(),o("span",K,"Нет новых запросов")):(a(),o("span",O,"Нет обработанных запросов"))])):(a(),o("div",P,[(a(!0),o(B,null,V(p.value,r=>(a(),o("div",{key:r.id,class:"group bg-light-bg dark:bg-gray-900/20 p-4 rounded-xl border border-light-border dark:border-gray-700/30 hover:border-purple-400/30 transition-all shadow-lg hover:shadow-purple-500/10"},[t("div",Q,[t("div",W,[t("div",X,[t("img",{src:r.track.icon,alt:r.track.title,class:"w-full h-full object-cover"},null,8,Y),e[5]||(e[5]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-gray-900/60 to-transparent rounded-xl"},null,-1)),i(n(D),{class:"absolute bottom-3 right-3 w-5 h-5 text-purple-400"})])]),t("div",q,[t("div",tt,[t("h3",et,l(r.track.title),1),t("span",rt,l(m(r.created_at)),1)]),t("p",st,l(r.track.artist),1),t("div",ot,[t("div",at,[t("div",dt,[t("div",nt,[e[6]||(e[6]=t("span",{class:"text-light-text-secondary dark:text-gray-400 text-sm"},"Статус:",-1)),t("span",{class:c([f(r.status),"px-3 py-1 rounded-full text-xs md:text-sm font-medium border"])},l(h(r.status)),3)]),t("div",it,[e[7]||(e[7]=t("span",{class:"text-light-text-secondary dark:text-gray-400 text-sm"},"Оплата:",-1)),t("span",{class:c([r.is_paid?"text-green-400":"text-amber-400","text-xs md:text-sm"])},l(r.is_paid?"Оплачен":"Ожидает оплаты"),3)])]),t("div",lt,[t("div",gt,[e[8]||(e[8]=t("p",{class:"text-xs text-light-text-secondary dark:text-gray-400 mb-1"},"Предложенная цена",-1)),t("p",ct,l(r.user_fee)+" ₽",1)]),t("div",xt,[e[9]||(e[9]=t("p",{class:"text-xs text-light-text-secondary dark:text-gray-400 mb-1"},"Минимальная цена",-1)),t("p",pt,l(r.min_fee)+" ₽",1)])])]),t("div",bt,[t("div",ut,[r.status==="pending"&&r.is_paid?(a(),o("button",{key:0,onClick:v=>y(r.id),disabled:n(d).loading,class:"flex items-center gap-2 px-4 py-2 bg-green-400/10 hover:bg-green-400/20 border border-green-400/30 rounded-xl transition-all disabled:opacity-50 group/accept"},[i(n(N),{class:"w-5 h-5 text-green-400 group-hover/accept:rotate-12 transition-transform"}),e[10]||(e[10]=t("span",{class:"text-sm text-green-400"},"Принять",-1))],8,mt)):u("",!0),r.status==="pending"?(a(),o("button",{key:1,onClick:v=>_(r.id),disabled:n(d).loading,class:"flex items-center gap-2 px-4 py-2 bg-red-400/10 hover:bg-red-400/20 border border-red-400/30 rounded-xl transition-all disabled:opacity-50 group/reject"},[i(n(F),{class:"w-5 h-5 text-red-400 group-hover/reject:rotate-12 transition-transform"}),e[11]||(e[11]=t("span",{class:"text-sm text-red-400"},"Отклонить",-1))],8,ht)):u("",!0)])])])])])]))),128))]))])])]),i(C)]))}});export{Ct as default};
