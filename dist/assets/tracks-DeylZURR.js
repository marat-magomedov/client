import{c as m,a as B,o as x,z as A,h as o,A as u,B as p}from"./index-5goyxosc.js";function F(d,v){return x(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const C=A("tracks",()=>{const d=o([]),v=o([]),f=o(null),l=o(!1),n=o(null);async function i(t,s){var e,r;try{l.value=!0,n.value=null;const a=await u.getTracks(t,s);d.value=a.data}catch(a){console.error("Fetch tracks error:",a),n.value=((r=(e=a.response)==null?void 0:e.data)==null?void 0:r.detail)||"Ошибка при загрузке треков"}finally{l.value=!1}}async function y(t,s){var e,r;try{l.value=!0,n.value=null;const a=await u.getTrack(t,s);return f.value=a.data,a.data}catch(a){return console.error("Fetch track error:",a),n.value=((r=(e=a.response)==null?void 0:e.data)==null?void 0:r.detail)||"Ошибка при загрузке трека",null}finally{l.value=!1}}async function h(t,s){var e,r;try{l.value=!0,n.value=null;const a=await u.addTrack(t,s);return await i(t),a.data}catch(a){return console.error("Add track error:",a),n.value=((r=(e=a.response)==null?void 0:e.data)==null?void 0:r.detail)||"Ошибка при добавлении трека",null}finally{l.value=!1}}async function w(t,s,e){var r,a;try{l.value=!0,n.value=null;const c=await u.updateTrack(t,s,e);return f.value=c.data,await i(t),c.data}catch(c){return console.error("Update track error:",c),n.value=((a=(r=c.response)==null?void 0:r.data)==null?void 0:a.detail)||"Ошибка при обновлении трека",null}finally{l.value=!1}}async function T(t,s){var e,r;try{return l.value=!0,n.value=null,await u.deleteTrack(t,s),await i(t),!0}catch(a){return console.error("Delete track error:",a),n.value=((r=(e=a.response)==null?void 0:e.data)==null?void 0:r.detail)||"Ошибка при удалении трека",!1}finally{l.value=!1}}async function k(){var t,s;try{l.value=!0,n.value=null;const e=await p.getGenres();v.value=e.data}catch(e){console.error("Fetch genres error:",e),n.value=((s=(t=e.response)==null?void 0:t.data)==null?void 0:s.detail)||"Ошибка при загрузке жанров"}finally{l.value=!1}}async function g(t){var s,e;try{l.value=!0,n.value=null;const r=await p.createGenre(t);return await k(),r.data}catch(r){return console.error("Create genre error:",r),n.value=((e=(s=r.response)==null?void 0:s.data)==null?void 0:e.detail)||"Ошибка при создании жанра",null}finally{l.value=!1}}return{tracks:d,genres:v,currentTrack:f,loading:l,error:n,fetchTracks:i,fetchTrack:y,addTrack:h,updateTrack:w,deleteTrack:T,fetchGenres:k,createGenre:g}});export{F as r,C as u};
