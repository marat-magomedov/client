import{z as w,h as l,E as h,G as f,H as v}from"./index-aZlXBPFY.js";const p=w("finance",()=>{const o=l([]),c=l([]),r=l(!1),t=l(null);async function u(){var s,e;try{r.value=!0,t.value=null;const a=await h.getTransactions();o.value=a.data}catch(a){console.error("Fetch transactions error:",a),t.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.detail)||"Ошибка при загрузке транзакций"}finally{r.value=!1}}async function i(){var s,e;try{r.value=!0,t.value=null;const a=await f.getWithdrawalsHistory();c.value=a.data}catch(a){console.error("Fetch withdrawals error:",a),t.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.detail)||"Ошибка при загрузке истории выводов"}finally{r.value=!1}}async function d(s){var e,a;try{r.value=!0,t.value=null;const n=await v.createWithdrawal(s);return await i(),n.data}catch(n){return console.error("Create withdrawal error:",n),t.value=((a=(e=n.response)==null?void 0:e.data)==null?void 0:a.detail)||"Ошибка при создании заявки на вывод средств",null}finally{r.value=!1}}return{transactions:o,withdrawals:c,loading:r,error:t,fetchTransactions:u,fetchWithdrawals:i,createWithdrawal:d}});export{p as u};
