import{c as h,a as y,o as w,z as R,h as o,C as c}from"./index-5LzwdxIU.js";function m(i,n){return w(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z"})])}const g=R("requests",()=>{const i=o([]),n=o(null),t=o(!1),r=o(null),v=o(null);async function d(){var s,u;try{t.value=!0,r.value=null;const a=await c.getRequests();i.value=a.data}catch(a){console.error("Fetch requests error:",a),r.value=((u=(s=a.response)==null?void 0:s.data)==null?void 0:u.detail)||"Ошибка при загрузке запросов"}finally{t.value=!1}}async function p(s,u){var a,l;try{t.value=!0,r.value=null;const e=await c.createRequest(s,u);return n.value=e.data,e.data}catch(e){return console.error("Create request error:",e),r.value=((l=(a=e.response)==null?void 0:a.data)==null?void 0:l.detail)||"Ошибка при создании запроса",null}finally{t.value=!1}}async function f(s,u){var a,l;try{t.value=!0,r.value=null;const e=await c.payRequest(s,u);return n.value&&n.value.payment_token===s&&(n.value.is_paid=!0),e.data}catch(e){return console.error("Pay request error:",e),r.value=((l=(a=e.response)==null?void 0:a.data)==null?void 0:l.detail)||"Ошибка при оплате запроса",null}finally{t.value=!1}}async function q(s,u){var a,l;try{t.value=!0,r.value=null;const e=await c.updateRequestStatus(s,u);return await d(),e.data}catch(e){return console.error("Update request status error:",e),r.value=((l=(a=e.response)==null?void 0:a.data)==null?void 0:l.detail)||"Ошибка при обновлении статуса запроса",null}finally{t.value=!1}}return{requests:i,currentRequest:n,loading:t,error:r,paymentUrl:v,fetchRequests:d,createRequest:p,payRequest:f,updateRequestStatus:q}});export{m as r,g as u};
