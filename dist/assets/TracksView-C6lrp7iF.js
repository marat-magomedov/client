import{c as n,a as e,o as a,d as H,u as I,l as U,h as j,n as Z,b as o,w as g,r as q,f as s,k as E,v as G,F as v,p as k,T,t as i,q as V,g as x,s as b,i as _}from"./index-DwfDKcVw.js";import{u as J,r as K}from"./tracks-BLOWbQzR.js";import{_ as O,c as P}from"./Footer.vue_vue_type_script_setup_true_lang-CjU_qaQj.js";import{I as Q,j as R,r as W,A as X,F as L}from"./listbox-Drfm08n5.js";import{r as Y,a as ee}from"./MagnifyingGlassIcon-ehPlEtHr.js";import{r as w}from"./ArrowPathIcon-CRMUxPgs.js";import{r as z}from"./CheckIcon-CnVxYD_8.js";import{r as A}from"./SunIcon-Cd1DBmYu.js";import{r as te}from"./ExclamationTriangleIcon-Cz5LoFv6.js";import"./CurrencyDollarIcon-Bkf6s2qJ.js";function re(y,c){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})])}function B(y,c){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})])}function C(y,c){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}const se={class:"min-h-screen bg-light-bg dark:bg-gray-900 flex flex-col"},oe={class:"flex-1 container mx-auto px-4 py-8 md:py-12"},ae={class:"max-w-7xl mx-auto"},le={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8"},de={class:"bg-light-bg-secondary dark:bg-gray-800/40 backdrop-blur-lg p-6 rounded-2xl border border-light-border dark:border-gray-700/30 shadow-xl mb-8 relative z-[99]"},ne={class:"grid md:grid-cols-3 gap-4"},ie={class:"relative"},ce={class:"relative z-[999]"},ge={class:"block truncate"},ue={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},pe={class:"relative"},xe={class:"flex gap-2"},be={class:"bg-light-bg-secondary dark:bg-gray-800/40 backdrop-blur-lg z-0 rounded-2xl border border-light-border dark:border-gray-700/30 shadow-xl overflow-hidden"},he={key:0,class:"p-8 text-center"},me={class:"inline-flex items-center gap-3 text-light-text-secondary dark:text-gray-400"},fe={key:1,class:"p-8 text-center"},ye={key:2},ve={class:"hidden md:block overflow-x-auto"},ke={class:"w-full"},_e={class:"divide-y divide-light-border dark:divide-gray-700/30"},we={class:"px-6 py-4"},Ce={class:"flex items-center gap-4"},$e={class:"relative w-12 h-12 rounded-xl overflow-hidden shrink-0 border border-light-border dark:border-gray-700/30"},je=["src","alt"],Te={class:"font-medium text-light-text dark:text-gray-100"},Ve={class:"text-sm text-light-text-secondary dark:text-gray-400"},Le={class:"px-6 py-4"},ze={class:"px-3 py-1 bg-light-bg dark:bg-gray-900/50 rounded-full text-sm text-purple-400 border border-purple-400/20"},Ae={class:"px-6 py-4"},Be={class:"text-green-400 font-medium"},De={class:"px-6 py-4 text-right"},Fe={class:"flex justify-end gap-2"},Me=["onClick"],Se={class:"md:hidden p-4 space-y-4"},Ne={class:"flex items-start p-4 gap-3"},He={class:"relative w-16 h-16 rounded-xl overflow-hidden shrink-0 border border-light-border dark:border-gray-700/30"},Ie=["src","alt"],Ue={class:"flex-1 min-w-0"},Ze={class:"font-medium text-light-text dark:text-gray-100 mb-1 truncate"},qe={class:"text-sm text-light-text-secondary dark:text-gray-400 mb-2"},Ee={class:"flex flex-wrap items-center gap-2 mb-2"},Ge={class:"px-3 py-1 bg-light-bg dark:bg-gray-900/50 rounded-full text-xs text-purple-400 border border-purple-400/20"},Je={class:"text-green-400 font-medium text-sm"},Ke={class:"flex justify-between items-center px-4 py-3 bg-light-bg-secondary dark:bg-gray-900/20 border-t border-light-border dark:border-gray-700/30"},Oe=["onClick"],Pe={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50"},Qe={class:"bg-light-bg-secondary dark:bg-gray-800/95 backdrop-blur-lg p-8 rounded-2xl border border-light-border dark:border-gray-700/30 shadow-2xl max-w-md w-full"},Re={class:"text-center mb-6"},We={class:"text-light-text-secondary dark:text-gray-400"},Xe={class:"text-purple-400"},Ye={class:"flex justify-center gap-4"},et=["disabled"],gt=H({__name:"TracksView",setup(y){const c=I(),l=J(),d=U({genre:null,search:""}),h=j(!1),u=j(null);async function D(){if(c.state.profile){const m={...d.genre?{genre:d.genre}:{},...d.search?{search:d.search}:{}};await l.fetchTracks(c.state.profile.id,m)}}function F(){d.genre=null,d.search="",c.state.profile&&l.fetchTracks(c.state.profile.id)}function $(m){u.value=m,h.value=!0}function M(){u.value=null,h.value=!1}async function S(){u.value&&c.state.profile&&(await l.deleteTrack(c.state.profile.id,u.value.id),h.value=!1,u.value=null)}return Z(async()=>{await l.fetchGenres(),c.state.profile&&await l.fetchTracks(c.state.profile.id)}),(m,r)=>{const f=q("router-link");return a(),n("div",se,[o(O),e("main",oe,[e("div",ae,[e("div",le,[r[3]||(r[3]=e("h1",{class:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-purple-400 via-blue-400 to-cyan-400 bg-clip-text text-transparent animate-fade-in"}," Управление треками ",-1)),o(f,{to:"/tracks/add",class:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600/30 to-blue-500/30 hover:from-purple-600/50 hover:to-blue-500/50 rounded-xl border border-purple-400/30 hover:border-purple-400/50 transition-all group"},{default:g(()=>[o(s(K),{class:"w-6 h-6 text-purple-400 group-hover:rotate-90 transition-transform"}),r[2]||(r[2]=e("span",{class:"text-purple-400 group-hover:text-white transition-colors"},"Добавить трек",-1))]),_:1})]),e("div",de,[e("div",ne,[e("div",ie,[o(s(Q),{modelValue:d.genre,"onUpdate:modelValue":r[0]||(r[0]=t=>d.genre=t)},{default:g(()=>[e("div",ce,[o(s(R),{class:"w-full pl-10 pr-4 py-2.5 text-left text-light-text dark:text-white bg-light-bg dark:bg-gray-900/20 border border-light-border dark:border-gray-700/30 rounded-xl focus:border-purple-400/50 focus:ring-2 focus:ring-purple-400/20 appearance-none"},{default:g(()=>{var t;return[o(s(ee),{class:"w-5 h-5 absolute left-3 top-3 text-light-text-secondary dark:text-gray-400 z-10"}),e("span",ge,i(d.genre?(t=s(l).genres.find(p=>p.id===d.genre))==null?void 0:t.name:"Все жанры"),1),e("span",ue,[o(s(W),{class:"h-5 w-5 text-light-text-secondary dark:text-gray-400","aria-hidden":"true"})])]}),_:1}),o(T,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:g(()=>[o(s(X),{class:"absolute z-[9999] mt-1 max-h-60 w-full overflow-auto rounded-xl bg-light-bg-secondary dark:bg-gray-800/95 backdrop-blur-lg py-1 text-base shadow-lg border border-light-border dark:border-gray-700/30 focus:outline-none"},{default:g(()=>[o(s(L),{value:null,class:"relative cursor-pointer select-none"},{default:g(({active:t,selected:p})=>[e("span",{class:V([t?"bg-purple-400/20 text-light-text dark:text-white":"text-light-text-secondary dark:text-gray-300","block truncate px-4 py-2"])},[r[4]||(r[4]=x(" Все жанры ")),d.genre===null?(a(),b(s(z),{key:0,class:"h-5 w-5 inline-block ml-2 text-purple-400","aria-hidden":"true"})):_("",!0)],2)]),_:1}),(a(!0),n(v,null,k(s(l).genres,t=>(a(),b(s(L),{key:t.id,value:t.id,class:"relative cursor-pointer select-none"},{default:g(({active:p,selected:N})=>[e("span",{class:V([p?"bg-purple-400/20 text-light-text dark:text-white":"text-light-text-secondary dark:text-gray-300","block truncate px-4 py-2"])},[x(i(t.name)+" ",1),N?(a(),b(s(z),{key:0,class:"h-5 w-5 inline-block ml-2 text-purple-400","aria-hidden":"true"})):_("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),e("div",pe,[o(s(Y),{class:"w-5 h-5 absolute left-3 top-3 text-light-text-secondary dark:text-gray-400 z-10"}),E(e("input",{type:"text","onUpdate:modelValue":r[1]||(r[1]=t=>d.search=t),placeholder:"Поиск по названию или исполнителю",class:"w-full pl-10 pr-4 py-2.5 bg-light-bg dark:bg-gray-900/20 border text-light-text dark:text-white border-light-border dark:border-gray-700/30 rounded-xl focus:border-purple-400/50 focus:ring-2 focus:ring-purple-400/20"},null,512),[[G,d.search]])]),e("div",xe,[e("button",{onClick:D,class:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-purple-400/10 hover:bg-purple-400/20 border border-purple-400/30 rounded-xl transition-all group"},[o(s(re),{class:"w-5 h-5 text-purple-400 group-hover:rotate-12 transition-transform"}),r[5]||(r[5]=e("span",{class:"text-purple-400"},"Применить",-1))]),e("button",{onClick:F,class:"px-4 py-2.5 bg-light-bg dark:bg-gray-700/10 hover:bg-light-bg-secondary dark:hover:bg-gray-700/20 border border-light-border dark:border-gray-700/30 rounded-xl transition-all group"},[o(s(w),{class:"w-5 h-5 text-light-text-secondary dark:text-gray-400 group-hover:rotate-180 transition-transform"})])])])]),e("div",be,[s(l).loading?(a(),n("div",he,[e("div",me,[o(s(w),{class:"w-6 h-6 animate-spin-once"}),r[6]||(r[6]=e("span",null,"Загрузка треков...",-1))])])):s(l).tracks.length===0?(a(),n("div",fe,[r[8]||(r[8]=e("p",{class:"text-light-text-secondary dark:text-gray-400 mb-4"},"Нет доступных треков",-1)),o(f,{to:"/tracks/add",class:"text-purple-400 hover:text-purple-300 transition-colors"},{default:g(()=>r[7]||(r[7]=[x(" Добавить первый трек ")])),_:1})])):(a(),n("div",ye,[e("div",ve,[e("table",ke,[r[10]||(r[10]=e("thead",{class:"bg-light-bg dark:bg-gray-900/30 border-b border-light-border dark:border-gray-700/30"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-sm font-medium text-light-text-secondary dark:text-gray-400"},"Трек"),e("th",{class:"px-6 py-4 text-left text-sm font-medium text-light-text-secondary dark:text-gray-400"},"Жанр"),e("th",{class:"px-6 py-4 text-left text-sm font-medium text-light-text-secondary dark:text-gray-400"},"Цена"),e("th",{class:"px-6 py-4 text-right text-sm font-medium text-light-text-secondary dark:text-gray-400"},"Действия")])],-1)),e("tbody",_e,[(a(!0),n(v,null,k(s(l).tracks,t=>(a(),n("tr",{key:t.id,class:"hover:bg-light-bg dark:hover:bg-gray-700/10 transition-colors group"},[e("td",we,[e("div",Ce,[e("div",$e,[e("img",{src:t.icon,alt:t.title,class:"w-full h-full object-cover"},null,8,je),r[9]||(r[9]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-gray-900/60 to-transparent"},null,-1)),o(s(A),{class:"absolute bottom-2 right-2 w-4 h-4 text-purple-400"})]),e("div",null,[e("p",Te,i(t.title),1),e("p",Ve,i(t.artist),1)])])]),e("td",Le,[e("span",ze,i(t.genre.name),1)]),e("td",Ae,[e("span",Be,i(t.price)+" ₽",1)]),e("td",De,[e("div",Fe,[o(f,{to:`/tracks/${t.id}/edit`,class:"p-2 bg-blue-400/10 hover:bg-blue-400/20 border border-blue-400/30 rounded-lg transition-colors group/edit"},{default:g(()=>[o(s(B),{class:"w-5 h-5 text-blue-400 group-hover/edit:rotate-12 transition-transform"})]),_:2},1032,["to"]),e("button",{onClick:p=>$(t),class:"p-2 bg-red-400/10 hover:bg-red-400/20 border border-red-400/30 rounded-lg transition-colors group/delete"},[o(s(C),{class:"w-5 h-5 text-red-400 group-hover/delete:rotate-12 transition-transform"})],8,Me)])])]))),128))])])]),e("div",Se,[(a(!0),n(v,null,k(s(l).tracks,t=>(a(),n("div",{key:t.id,class:"bg-light-bg dark:bg-gray-800/30 rounded-xl border border-light-border dark:border-gray-700/30 hover:border-purple-400/30 transition-all group"},[e("div",Ne,[e("div",He,[e("img",{src:t.icon,alt:t.title,class:"w-full h-full object-cover"},null,8,Ie),r[11]||(r[11]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-gray-900/60 to-transparent"},null,-1)),o(s(A),{class:"absolute bottom-2 right-2 w-4 h-4 text-purple-400"})]),e("div",Ue,[e("h3",Ze,i(t.title),1),e("p",qe,i(t.artist),1),e("div",Ee,[e("span",Ge,i(t.genre.name),1),e("span",Je,i(t.price)+" ₽",1)])])]),e("div",Ke,[o(f,{to:`/tracks/${t.id}/edit`,class:"flex items-center gap-1.5 text-blue-400 text-sm hover:text-blue-300 transition-colors"},{default:g(()=>[o(s(B),{class:"w-4 h-4"}),r[12]||(r[12]=e("span",null,"Редактировать",-1))]),_:2},1032,["to"]),e("button",{onClick:p=>$(t),class:"flex items-center gap-1.5 text-red-400 text-sm hover:text-red-300 transition-colors"},[o(s(C),{class:"w-4 h-4"}),r[13]||(r[13]=e("span",null,"Удалить",-1))],8,Oe)])]))),128))])]))])])]),o(T,{name:"fade"},{default:g(()=>{var t;return[h.value?(a(),n("div",Pe,[e("div",Qe,[e("div",Re,[o(s(te),{class:"w-12 h-12 text-red-400 mx-auto mb-4 animate-pulse"}),r[16]||(r[16]=e("h3",{class:"text-xl font-bold text-light-text dark:text-gray-200 mb-2"},"Удалить трек?",-1)),e("p",We,[r[14]||(r[14]=x(" Трек ")),e("span",Xe,'"'+i((t=u.value)==null?void 0:t.title)+'"',1),r[15]||(r[15]=x(" будет удалён безвозвратно "))])]),e("div",Ye,[e("button",{onClick:M,class:"px-6 py-2.5 bg-light-bg dark:bg-gray-700/10 hover:bg-light-bg-secondary dark:hover:bg-gray-700/20 border border-light-border dark:border-gray-700/30 text-light-text-secondary dark:text-gray-400 rounded-xl transition-all"}," Отмена "),e("button",{onClick:S,disabled:s(l).loading,class:"px-6 py-2.5 bg-red-400/10 hover:bg-red-400/20 border border-red-400/30 text-red-400 rounded-xl transition-all disabled:opacity-50"},[s(l).loading?(a(),b(s(w),{key:1,class:"w-5 h-5 mr-2 animate-spin inline"})):(a(),b(s(C),{key:0,class:"w-5 h-5 mr-2 inline"})),x(" "+i(s(l).loading?"Удаление...":"Удалить"),1)],8,et)])])])):_("",!0)]}),_:1}),o(P)])}}});export{gt as default};
